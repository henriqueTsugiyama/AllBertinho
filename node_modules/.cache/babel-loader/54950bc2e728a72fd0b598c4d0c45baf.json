{"ast":null,"code":"import _regeneratorRuntime from\"/home/henrique_yasuo/Documents/AllBertinho/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/henrique_yasuo/Documents/AllBertinho/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/henrique_yasuo/Documents/AllBertinho/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import{Link,Redirect}from'react-router-dom';import{Helmet}from'react-helmet';import{Alert,Row,Col,Image,ListGroup,Card}from\"react-bootstrap\";import{toast}from'react-toastify';import'../../index.css';import'../../bootstrap.min.css';import Header from'../../components/Header';import api from'../../services/api';import{useDispatch}from'react-redux';import{createBrowserHistory}from'history';import*as actions from'../../store/modules/cart/actions';import store from'../../store';import Zap from'../../components/Zap';function Produto(props){//Sets product, name, id, description, image\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),image=_useState8[0],setImage=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),sold=_useState10[0],setStatus=_useState10[1];//validation of cart\nvar dispatch=useDispatch();var signed=store.getState().auth.signed;console.log(signed);useEffect(function(){var match=props.match;var params=match.params;var id=params.id;function fetchProduct(){return _fetchProduct.apply(this,arguments);}function _fetchProduct(){_fetchProduct=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$api$get,data,_data$,name,_description,_price,_image,_sold;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.get(\"/product/\".concat(id));case 3:_yield$api$get=_context.sent;data=_yield$api$get.data;_data$=data[0],name=_data$.name,_description=_data$.description,_price=_data$.price,_image=_data$.image,_sold=_data$.sold;setProduct(name);setDescription(_description);setPrice(_price);setImage(_image);setStatus(_sold);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log(\"O erro foi \"+_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return _fetchProduct.apply(this,arguments);}fetchProduct();},[]);function postSale(){return _postSale.apply(this,arguments);}function _postSale(){_postSale=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var match,params,id,_yield$api$get2,data,history;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:match=props.match;params=match.params;id=params.id;_context2.next=5;return api.get(\"/product/\".concat(id));case 5:_yield$api$get2=_context2.sent;data=_yield$api$get2.data;history=createBrowserHistory();toast.success(\"Adicionado ao carrinho!\");dispatch(actions.addToCartRequest(data[0]));setTimeout(function(){return window.location.reload(history.push('/voce'));},2000);case 11:case\"end\":return _context2.stop();}}},_callee2);}));return _postSale.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"ALLBERTINHO | Produto \"})}),/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Zap,{}),product?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(Image,{src:image,style:{width:200,height:200},alt:\"Oops\",fluid:true}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:8,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{className:\"text-capitalize title-box\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\" \",product]})}),/*#__PURE__*/_jsx(ListGroup.Item,{className:\"text-capitalize\",children:description})]})}),/*#__PURE__*/_jsx(Col,{sm:4,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Pre\\xE7o: \"}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"R$ \",price]})})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Status: \"}),/*#__PURE__*/_jsx(Col,{children:sold?'Esgotado':'Em Estoque'})]})})]})})]})]}),/*#__PURE__*/_jsx(\"footer\",{children:/*#__PURE__*/_jsxs(Row,{children:[signed?/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-light my-3\",to:\"/admin\",children:\"Voltar\"})}):/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-light my-3\",to:\"/\",children:\"Voltar\"})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{onClick:postSale,className:\"btn btn-success float-sm-right my-3\",children:\"Comprar\"})})]})}),\" \"]}):setTimeout(function(){/*#__PURE__*/_jsx(Link,{to:\"/QuatroZeroQuatro\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Nao achamos seu produto, volte ao inicio\"})});},3000)]});}export default Produto;","map":{"version":3,"sources":["/home/henrique_yasuo/Documents/AllBertinho/src/screens/Produto/index.js"],"names":["React","useState","useEffect","Link","Redirect","Helmet","Alert","Row","Col","Image","ListGroup","Card","toast","Header","api","useDispatch","createBrowserHistory","actions","store","Zap","Produto","props","product","setProduct","description","setDescription","price","setPrice","image","setImage","sold","setStatus","dispatch","signed","getState","auth","console","log","match","params","id","fetchProduct","get","data","name","postSale","history","success","addToCartRequest","setTimeout","window","location","reload","push","width","height"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { Helmet } from 'react-helmet';\nimport { Alert, Row, Col, Image, ListGroup, Card } from \"react-bootstrap\";\nimport { toast } from 'react-toastify';\nimport '../../index.css';\nimport '../../bootstrap.min.css';\nimport Header from '../../components/Header';\nimport api from '../../services/api';\nimport { useDispatch } from 'react-redux'\nimport { createBrowserHistory } from 'history';\nimport * as actions from '../../store/modules/cart/actions';\nimport store from '../../store';\nimport Zap from '../../components/Zap';\n\n\n function Produto(props) {\n\n   //Sets product, name, id, description, image\n    const [product, setProduct] = useState();\n    const [description, setDescription] = useState();\n    const [price, setPrice] = useState();\n    const [image, setImage] = useState();\n    const [sold, setStatus] = useState();\n\n    //validation of cart\n\n    const  dispatch = useDispatch()\n    const { signed } = store.getState().auth;\n    console.log(signed)\n\n    useEffect(() => {\n\n      const { match } = props;\n      const { params } = match;\n      const { id } = params;\n\n      async function fetchProduct(){\n        try{\n          const {data} = await api.get(`/product/${id}`)\n          const {name, description, price, image, sold} = data[0];\n\n          setProduct(name)\n          setDescription(description)\n          setPrice(price)\n          setImage(image)\n          setStatus(sold)\n        } catch(err){\n          console.log(\"O erro foi \"+ err)\n        }\n\n      }\n      fetchProduct();\n    }, [])\n\n    async function postSale() {\n      const { match } = props;\n      const { params } = match;\n      const { id } = params;\n      const {data} =  await api.get(`/product/${id}`)\n\n        const history = createBrowserHistory();\n        toast.success(\"Adicionado ao carrinho!\")\n        dispatch(actions.addToCartRequest(data[0]))\n        setTimeout(() =>  window.location.reload(history.push('/voce')), 2000)\n    }\n\n    return (\n      <>\n          <Helmet>\n            <title>ALLBERTINHO | Produto </title>\n          </Helmet>\n          <Header />\n          <Zap/>\n        { product ?(\n        <>\n          <main>\n            <Image src={image} style={{ width: 200, height: 200 }} alt=\"Oops\" fluid></Image>\n              <Row>\n                <Col sm={8}>\n                <ListGroup variant='flush'>\n                    <ListGroup.Item className=\"text-capitalize title-box\">\n                      <strong> {product}</strong>\n                    </ListGroup.Item>\n\n                    <ListGroup.Item className=\"text-capitalize\">\n                      {description}\n                    </ListGroup.Item>\n                  </ListGroup>\n                </Col>\n\n\n                <Col sm={4}>\n\n                  <ListGroup variant='flush'  >\n                    <ListGroup.Item ></ListGroup.Item >\n                    <ListGroup.Item >\n                      <Row>\n                        <Col>Preço: </Col>\n                        <Col>\n                          <strong>R$ {price}</strong>\n                        </Col>\n                      </Row>\n                    </ListGroup.Item>\n\n                    <ListGroup.Item>\n                      <Row>\n                          <Col>Status: </Col>\n                          <Col>\n                            {sold ? 'Esgotado':'Em Estoque'  }\n                          </Col>\n                      </Row>\n                    </ListGroup.Item>\n                </ListGroup>\n\n                </Col>\n            </Row>\n          </main>\n\n          <footer >\n            <Row>\n              { signed ?\n                (<Col>\n                <Link className='btn btn-light my-3' to='/admin'>\n                Voltar\n                </Link>\n                </Col> ):\n                (<Col>\n                  <Link className='btn btn-light my-3' to='/'>\n                  Voltar\n                  </Link>\n                </Col> )}\n\n              <Col >\n                <Link onClick={postSale} className='btn btn-success float-sm-right my-3'   >\n                Comprar\n                </Link>\n              </Col>\n            </Row>\n          </footer> </>)\n          :\n          (setTimeout(() => {\n            <Link to='/QuatroZeroQuatro'>\n            <h2>Nao achamos seu produto, volte ao inicio</h2>\n            </Link>\n          }, 3000))}\n\n\n      </>\n      )\n    }\n\nexport default Produto;\n"]},"metadata":{},"sourceType":"module"}