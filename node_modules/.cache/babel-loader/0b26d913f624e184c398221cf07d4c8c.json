{"ast":null,"code":"import _regeneratorRuntime from\"/home/henrique_yasuo/Documents/AllBertinho/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/henrique_yasuo/Documents/AllBertinho/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/henrique_yasuo/Documents/AllBertinho/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useEffect,useState}from'react';import{Card,Nav,Col,Row,ListGroup,Button}from\"react-bootstrap\";import{LinkContainer}from'react-router-bootstrap';import store from'../../store';import api from'../../services/api';import{useDispatch}from'react-redux';import{toast}from'react-toastify';import*as actions from'../../store/modules/cart/actions';import'../../index.css';import'../../bootstrap.min.css';function CarrinhoCompras(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];useEffect(function(){var products=store.getState().cart;setProduct(products);console.log(products);},[]);var dispatch=useDispatch();function checkout(_x){return _checkout.apply(this,arguments);}function _checkout(){_checkout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var sold;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:toast.success(\"Compra finalizada!\");_context.next=3;return dispatch(actions.removeToCart(id));case 3:setTimeout(function(){window.location.reload();},3000);_context.next=6;return api.post(\"/sale/\".concat(id));case 6:sold=_context.sent;case 7:case\"end\":return _context.stop();}}},_callee);}));return _checkout.apply(this,arguments);}function remove(_x2){return _remove.apply(this,arguments);}function _remove(){_remove=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:toast.success(\"Produto removido do carrinho.\");_context2.next=3;return dispatch(actions.removeToCart(id));case 3:setTimeout(function(){window.location.reload();},3000);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _remove.apply(this,arguments);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Col,{variant:\"flush\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h3\",{className:\"fas fa-shopping-cart mx-1\",children:\"Meu Carrinho\"})})}),product.map(function(p){return/*#__PURE__*/_jsx(Card,{className:\"card-margin\",bg:\"light\",variant:\"light\",sm:12,md:6,lg:4,xl:3,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(Card.Title,{children:[\" \",/*#__PURE__*/_jsx(\"p\",{className:\"title-box card-margin\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Nome do produto\"})})]}),/*#__PURE__*/_jsx(Card.Subtitle,{children:/*#__PURE__*/_jsx(\"p\",{children:p.name})})]}),/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(Card.Title,{children:[\" \",/*#__PURE__*/_jsx(\"p\",{className:\"title-box card-margin\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"ID\"})})]}),/*#__PURE__*/_jsxs(Card.Subtitle,{children:[\" \",/*#__PURE__*/_jsx(\"p\",{children:p._id})]})]}),/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(Button,{variant:\"info\",className:\"button-margin\",onClick:function onClick(){checkout(p._id);},children:\" Finalizar \"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"button-margin\",onClick:function onClick(){remove(p._id);},children:\" Remover \"})]})]})},p._id);})]})});}export default CarrinhoCompras;","map":{"version":3,"sources":["/home/henrique_yasuo/Documents/AllBertinho/src/components/Carrinho/index.js"],"names":["React","useEffect","useState","Card","Nav","Col","Row","ListGroup","Button","LinkContainer","store","api","useDispatch","toast","actions","CarrinhoCompras","product","setProduct","products","getState","cart","console","log","dispatch","checkout","id","success","removeToCart","setTimeout","window","location","reload","post","sold","remove","map","p","name","_id"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { Card, Nav, Col, Row, ListGroup, Button} from \"react-bootstrap\";\nimport { LinkContainer } from 'react-router-bootstrap';\nimport store from '../../store';\nimport api from '../../services/api';\nimport { useDispatch } from 'react-redux'\nimport { toast } from 'react-toastify';\nimport * as actions from '../../store/modules/cart/actions';\nimport '../../index.css';\nimport '../../bootstrap.min.css';\n\nfunction CarrinhoCompras() {\n    const [product, setProduct] = useState([]);\n\n    useEffect(() => {\n      const products = store.getState().cart;\n      setProduct(products)\n      console.log(products)\n    \n      \n    }, [])\n    \n    const  dispatch = useDispatch()\n\n    async function checkout(id){\n        toast.success(\"Compra finalizada!\")\n        await dispatch(actions.removeToCart(id))\n        setTimeout(() => {\n            window.location.reload();\n        }, 3000);\n       const sold = await api.post(`/sale/${id}`)\n       \n    }\n    async function remove(id){\n      toast.success(\"Produto removido do carrinho.\")\n      await dispatch(actions.removeToCart(id))\n      setTimeout(() => {\n          window.location.reload();\n      }, 3000);\n  \n  }\n    return (\n      <>\n        \n    <Col variant=\"flush\" >\n    <Row>\n        <Col>\n        <h3 className='fas fa-shopping-cart mx-1'>Meu Carrinho</h3>\n        </Col>\n    </Row>\n    {product.map((p) => (\n      <Card key={p._id} className=\"card-margin\"  bg=\"light\" variant=\"light\"  sm={12} md={6} lg={4} xl={3}>\n        <Row >       \n          <Col>  \n            <Card.Title> <p className=\"title-box card-margin\"><strong>Nome do produto</strong></p></Card.Title>  \n            <Card.Subtitle><p>{p.name}</p></Card.Subtitle>\n          </Col>\n          <Col>\n            <Card.Title> <p className=\"title-box card-margin\"><strong>ID</strong></p></Card.Title>\n            <Card.Subtitle> <p>{p._id}</p></Card.Subtitle> \n          </Col>\n          <Col>\n            <Button variant=\"info\" className=\"button-margin\" onClick={()=>{checkout(p._id)}}> Finalizar </Button>\n            <Button variant=\"danger\" className=\"button-margin\" onClick={()=>{remove(p._id)}}> Remover </Button>\n          </Col>\n        </Row>\n      </Card>\n        ))}\n      </Col>\n  </>\n    )\n  }\n  \n  export default CarrinhoCompras;\n"]},"metadata":{},"sourceType":"module"}